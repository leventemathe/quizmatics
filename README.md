# Quizmatics

The name has been generated by [Namelix](https://namelix.com).

## Requirements and stack

The app was built with Create React App, the dependencies are managed with yarn.  
It's using TypeScript, Material UI components, and XState.  
Tests are written with Jest and React Testing Library.  
ESLint is responsible for static analysis, Prettier is used for formatting code. The usage of an editor plugin is recommended for linting.

## How to run

Use `yarn` to install all the dependencies.  
Then run the development version with `yarn dev`.

To run the tests, use `yarn test`, to lint the entire app, run `yarn lint`.

The source code is on [Github](https://github.com/leventemathe/quizmatics), and the app is hosted on [Netlify](https://quizmatics.netlify.app).

## Architecture

### Model

The model is split into multiple layers.  
The core is a state machine managed by XState, found in "state/game". It's responsible for keeping track of the state of the game, the transitions between states, and it has some extended state (context) that is needed to play the game, like the list of questions, answers etc.  
The code responsible for fetching questions form an API has two layers itself, and can be found in the "networking" folder:

- the first is a wrapper around an http library, currently axios, with flexible default error handling, called "request"
- the second is the "fetchQuestions" function, which is responsible for fetching the trivia questions in the expected format

The state machine is shared between components by storing it in a React context. By injecting the fetcher function as a dependency through the provider, and by using strings as answers instead of booleans, the state machine is quite generic, and can be used for different kinds of trivia games. The context and provider are found in "state/game", but only the provider is exported, because hooks should be used to access the state, instead of directly using the context.  

Additional logic and glue code can be found in the hooks found in "state/game/hooks". These expose the appropriate parts of the state machine (state and commands), and provide some utilities like calculating the final score.  

### Container

The only container in the "containers" folder is PageContainer, which is responsible for displaying the correct page, based on the game state.  
Otherwiser React hooks are used instead of container components.  

### View

The code responsible for presenting the UI can be found in:

- the "components" folder
- the "pages" folder

Pages contain components, either composite custom components (found in "components/*") or components provided by Material UI. The necessary state and commands are connected to the view by React hooks.

## Testing

The "test-utils" folder contains utilities for testing, and also reexports React Testing Library features.  
To insert providers, the function in "customRender" can be used instead of the one provided by RTL, which is wrapped by it.  
Utilities for generating fake data for mocks can also be found here.  
